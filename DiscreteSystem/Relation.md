# 関係

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax:{inlineMath:[['\$','\$'],['\\(','\\)']],processEscapes:true},CommonHTML: {matchFontHeight:false}});</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


# Linear Algebra Tips

<div align="right">会津大学修学支援室</div>

## はじめに
関係$R$は2つの集合に対して定義される。
特に、与えられた関係が反射・推移・対称と呼ばれる性質を持っているのかどうかが興味の対象となることが多い。
それは、この3つの性質(反射・対称・推移)を持っている関係のことを特別に同値関係といい、同値関係にある2つの集合は、この関係$R$によって"同一視"することができるためである。

例えば、2つの集合$A, B$が異なるものに見えたとしても、ある関係$R$によって同値関係であることがわかると、この関係$R$の上では$A$と$B$を、同じ性質を持ったものとして認識することができる。

同じものなのか異なるのものなのか、これを判断するための尺度の1つが同値関係である。

アルゴリズムとデータ構造で扱われるグラフにも関係が使われている。ノードとノードの接続関係である。
ほかにも、2つの数値の大小も関係である。

"関係"という考え方はさまざまなところに登場する。
本記事では"関係"を理解するためにいくつかの具体例をあげている。
具体例をたどりながら"関係"と親しい関係になろう。



## 関係
2つの集合$A, B$について、その直積集合$A\times B$の部分集合を$R$とする。
つまり、$R \subset A\times B$である。この部分集合$R$のことを、$A$から$B$への関係という。

それから、$R$の要素$(a, b)$について、$a$と$b$は「$R$の関係にある」といい、$aRb$とあらわす。

また、$R$が$A\times A$の関係のとき、「$R$は$A$上の関係」とよぶ。


## 逆関係

$R$を$A$から$B$への関係とする。
$R$の逆関係を$R^{-1}$であらわし、次のように定義される。
$$
R^{-1} := \{ (b, a) \in B\times A \mid (a, b) \in R \} \subset B \times A
$$

$R$は$A\times B$の部分集合である。
$R^{-1}$も似たように$B\times A$の部分集合であるが、その要素$(b, a)$に対して、成分の位置を交換したもの$(a, b)$が$R$に含まれるという制約が付いていることに注意である。

$R^{-1}$の定義より、$b R^{-1} a \Leftrightarrow aRb$である。

## 同値関係

$A$を集合、$R \subset A\times A$を関係とする。
関係$R$が次の3つの性質を満たすとき、$R$を$A$上の同値関係という。

1. 反射律：任意の$a \in A$について、$aRa$である。
2. 対称律：任意の$(a, b) \in A\times A$について、$(a, b)\in R$ならば$(b, a)\in R$である。
3. 推移律：任意の$(a, b), (b, c) \in A\times A$について、$(a, b)\in R$かつ$(b, c)\in R$ならば$(a, c)\in R$である。





## 具体例

### 例1：合同($\bmod$)
$\mathbb{Z}$を整数全体とし、$m \geq 2$を整数とする。
ここで、関係$R$を次のように定義する。
2つの整数$x, y \in \mathbb{Z}$について、
$$
	xRy \Leftrightarrow x \equiv y (\bmod m)
$$
とする。この関係$R$は同値関係になる。これを示す。
まず、$x \equiv y (\bmod m)$ということは、ある整数$p, q$を用いて$x = pm, y = qm$と書ける。

1. 明らかに$x\equiv x (\bmod m)$であるので、反射律を満たす。
2. $x\equiv y (\bmod m)$とすると、$x - y \equiv 0 (\bmod m)$であり、$p-q$もまた整数であるため確かに、$(p-q)m \equiv 0 (\bmod m)$である。$q-p$も整数であること考えると、$(q-p)m \equiv 0 (\bmod m)$より、$y \equiv x (\bmod m)$を得る。つまり、対称律を満たす。
3. 同様に、新たにある整数$r$を用いて$z = rm$とすると、$x \equiv y (\bmod m)$かつ$y \equiv z (\bmod m)$より、$(p-q)m + (q-r)m \equiv 0 (\bmod m)$となるので、$x \equiv z (\bmod m)$を得る。

以上のことから、この関係$R(\bmod m)$は同値関係である。

全ての整数は$\bmod m$によって、あまりが$0, 1, \ldots, m-1$となる整数に分類される。
$\bmod m$によって、あまりが同じ整数は(あまりが同じという意味で)同一視することができる。


### 例2：変数の型
C言語で使われるプログラムの変数の集合に対して、関係$R$を「変数の型が同じである」とすると、この関係は同値関係になる。


### 例3：誕生日
$S$を人間の集合とする。
$S$上の関係$R$を同じ誕生日であるとすると、この関係$R$は同値関係である。

2月29日も含めて、この関係$R$で人間は366種類のグループに分類できる。

### 例4：直線
$S$を平面上の直線の集合とする。
$S$上の関係$R$を、直線が平行であるとすると、この関係$R$は同値関係である。


### 例5：図形の合同
2つの平面図形が合同であるという関係は同値関係である。


### 例6：図形の相似
2つの平面図形が相似であるという関係は同値関係である。


### 例7：じゃんけん
じゃんけんに使われる要素の集合を$S = \{\text{グー}, \text{チョキ}, \text{パー} \}$とする。
関係$R$をじゃんけんの勝ちとすると、
$$
	R = \{ (\text{グー}, \text{チョキ}), (\text{チョキ}, \text{パー}), (\text{パー}, \text{グー}) \}
$$
となる。
この関係$R$は、反射・対称・推移のどれ一つも成立しない。


### 例8：DNS
$A$をドメイン名の集合、$B$をIPアドレスの集合とする。
$A$から$B$への関係$R$を次のように定義する。

$$
	R := \{ (\text{www.u-aizu.ac.jp}, 163.143.103.90), (\text{www.google.com}, 142.250.207.36),  \}
$$

DNSはドメイン名とIPアドレスの関係付けを行う。
上記の関係$R$は、会津大学とGoogleのDNSについて記したものである。


### 例9：線型空間の核
$V, W$を線型空間、写像$f:V\mapsto W$を線型写像とする。
また、線型写像$f$の核を$\text{Ker}f = \{ v \in V \mid f(v) = 0 \}$とする。
ここで、$V$上の関係$R$を次のように定める。
2つのベクトル$v_1, v_2 \in V$について、
$$
	v_1 R v_2 \Leftrightarrow v_1 - v_2 \in \text{Ker}f
$$
する。この関係$R$は同値関係になる。これを示す。

1. 任意の$v_1 \in V$について、$v_1 - v_1 = 0$となるので、$f(v_1 - v_1) = f(0) = 0$より、確かに$v_1 - v_1 \in \text{Ker}f$である。つまり、反射律を満たす。
2. 任意の$(v_1, v_2) \in V\times V$について、まず、$v_1 - v_2 = v_2 - v_1$である。そのため、$f(v_1 - v_2) = $であれば、$f(v_2 - v_1) = 0$である。つまり、対称律を満たす。
3. 任意の$(v_1, v_2), (v_2, v_3) \in V\times V$について、$f(v_1 - v_2) = 0$かつ$f(v_2 - v_3) = 0$とする。$f$は線型写像なので、$$f(v_1 - v_2) + f(v_2 - v_3) = f((v_1-v_2)+(v_2-v_3)) = 0$$である。なので、$$0 = f((v_1-v_2)+(v_2-v_3)) = f(v_1-v_2 + v_2 + v_3) = f(v_1 - v_3)$$より、推移律を満たす。

以上のことから、$R$は同値関係である。


### 例10：極端なもの
$S = \{ 1 \}$とする。$S$上の関係$R$として$\neq$を考える。

1. $1 \neq 1$は偽であるため、反射律を満たさない。
2. 対称律は$aRb$ならば、$bRa$である。ところがそもそもとして今回のケースは$aRb$が成立しない。よって、前提が偽であるため結論は真である。つまり、対称律を満たしてしまう。
4. 同様に、推移律も満たす。


### 例11：ダブレット(doublets)
ダブレットは「ことばのはしご」とも呼ばれ、不思議の国のアリスの作者であるルイス・キャロルが広めた言葉遊びである。([wikipedia](https://ja.wikipedia.org/wiki/ことばの梯子))
ルールは簡単である。
2つの文字数が同じ単語が与えられたとき、片方の単語を最大1文字ずつ変形した単語を使って、もう片方の文字へ変形するというものだ。
例えば、COLDとWARMが与えられたら、次のような変形が考えられる。
COLD → CO**R**D → C**A**RD → **W**ARD → WAR**M**

この変形は同値関係である。
1. 例えば、与えられた2つの文字列がCOLDとCOLDであれば、これは反射律を満たしているみなせる。
2. また、COLD → CORDであれば、CORD→COLDであるため対称律を満たす。
3. COLD → CORDかつCORD → CARDであれば、COLD → CARDは2文字異なるだけなので、推移律を満たしているとみなせる。






## お知らせ

修学支援室では「授業で難しく感じたところ」に関するアンケートを実施中です。
全てではありませんがこんな風に記事になる可能性がありますのでぜひ調査にご協力いただければと思います。

[授業で難しかったところについてのアンケート](https://docs.google.com/forms/d/e/1FAIpQLScWKlr5Q9ctfumYM_BZsII-UX1ToD6e8-OLpqSH8biI9AJ7Gg/viewform?usp=sf_link)